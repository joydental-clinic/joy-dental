---
import { PortableText } from "astro-portabletext";
import { urlFor } from "@/utils/sanity";

interface Props {
  value: any;
}

const { value } = Astro.props;

const components = {
  type: {
    image: (node: any) => {
      if (!node?.value?.asset) return "";
      const src = urlFor(node.value).width(800).quality(85).url();
      const alt = node.value.alt || "";
      return `<img src="${src}" alt="${alt}" loading="lazy" />`;
    },
  },
};
---

<PortableText value={value} components={components} />
